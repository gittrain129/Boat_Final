<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.boat.mybatis.mapper.TodoMapper">
  
		
		
		<insert id="Todoinsert">
		insert into TODOLIST (NUM,EMPNO, T_CONTENT,START_DATE,END_DATE) 
		values(todo_seq.nextval, #{EMPNO},#{T_CONTENT},#{START_DATE},#{END_DATE})
		</insert>
		  
		 <select id ="myTodolist" resultType="Todo">
		 select * from TODOLIST
		 where empno = #{empno}
		 order by reg_date desc
		 </select> 
		  
		 <select id="getDept" resultType="string">
		 select dept from member 
		 where empno = #{empno}
		 </select>
		 
		 <select id="myDeptTodo" resultMap ="deptTodomember" >
		<!-- 부서별 Todo값 가져오기 -->
			SELECT T.*, M.name name,M.job job,M.dept dept
			FROM (select * from member where dept = '홍보팀')M
			full outer JOIN (select * from todolist where dept = '홍보팀')T
			ON T.empno = M.empno
			order by M.empno
		 
		 </select>
		 
		 <resultMap id="deptTodomember" type="com.boat.domain.Todo">
		 	<result property="T_CONTENT" column="T_CONTENT"/>
		 	<result property="START_DATE" column="START_DATE"/>
		 	<result property="END_DATE" column="END_DATE"/>
		 	<result property="REG_DATE" column="REG_DATE"/>
		 	<result property="NUM" column="NUM"/>
		 	<!--  <collection property="member"/> -->
		 	
		 	  <association property="member" javaType="Todo">
			    <id property="member.EMPNO" column="EMPNO"/>
			    <result property="member.NAME" column="NAME"/>
			    <result property="member.DEPT" column="DEPT"/>
			    <result property="member.JOB" column="JOB"/>
			    <result property="member.PROFILE_FILE" column="PROFILE_FILE"/>
			    <result property="member.PROFILE_IMG" column="PROFILE_IMG"/>
 			 </association>
		 </resultMap>
		 
		 
		 
  </mapper>