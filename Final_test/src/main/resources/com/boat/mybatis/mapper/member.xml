<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boat.mybatis.mapper.MemberMapper">

	<select id="naverConnectionCheck" resultType="java.util.Map">
		SELECT * FROM MEMBER WHERE EMAIL = #{email}
	</select>

	<select id="userNaverLoginPro" resultType="java.util.Map">
		SELECT * FROM MEMBER WHERE EMAIL = #{email} AND NAVERLOGIN = #{id}
	</select>

	<update id="setNaverConnection">
		UPDATE MEMBER SET NAVERLOGIN = #{id} WHERE EMAIL = #{email}
	</update>

	<!-- 사원번호 생성하기 위해 조회 -->
	<select id="isEmpno" resultType="member">
		SELECT * FROM (
			SELECT * FROM MEMBER
			WHERE DEPT = #{select}
			ORDER BY REGISTER_DATE DESC)
		WHERE ROWNUM = 1
	</select>
	
	<insert id="insert">
		INSERT INTO MEMBER
		VALUES
		(#{EMPNO}, #{DEPT}, #{JOB}, #{PASSWORD}, #{PASSWORD_OG}, #{NAME}, #{EMAIL}, 
		#{PROFILE_FILE}, #{PROFILE_IMG}, SYSDATE, #{AUTH}, NULL, NULL)
	</insert>

	<select id="isId" resultType="member">
		SELECT * FROM MEMBER
		WHERE EMPNO = #{empno}
	</select>
	
	<insert id="userNaverRegisterPro">
		INSERT INTO MEMBER 
		VALUES (#{EMPNO}, #{DEPT}, '사원', #{PASSWORD}, #{PASSWORD_OG}, #{NAME}, #{EMAIL},
		#{PROFILE_FILE}, #{PROFILE_IMG}, SYSDATE, 'ROLE_MEMBER', #{id}, NULL)
	</insert>

	<select id="GoogleConnectionCheck" resultType="java.util.Map">
		SELECT * FROM MEMBER WHERE EMAIL = #{email}
	</select>

	<select id="userGoogleLoginPro" resultType="java.util.Map">
		SELECT * FROM MEMBER WHERE EMAIL = #{email} AND GOOGLELOGIN = #{id}
	</select>
	
</mapper>