select * from file_board;

delete from file_board
COL FILE_NAME FORMAT A20
COL FILE_SUBJECT FORMAT A20
COL FILE_CONTENT FORMAT A20
COL FILE_FILE FORMAT A20
COL FILE_FILE2 FORMAT A20
COL FILE_ORIGINAL FORMAT A20
COL FILE_EMPNO FORMAT A20
COL DEPT FORMAT A20
COL FILE_NAME FORMAT A20
COL FILE_NAME FORMAT A20
COL FILE_NAME FORMAT A20
COL FILE_NAME FORMAT A20

drop table file_board cascade constraints purge;

	create table file_board (
	FILE_NUM NUMBER(5) primary key,
	FILE_NAME VARCHAR2(30), 
	FILE_PASS NUMBER(30),
	FILE_SUBJECT VARCHAR2(300),	
	FILE_CONTENT VARCHAR2(4000),		
	FILE_FILE VARCHAR2(100),
	FILE_FILE2 VARCHAR2(100),		
	FILE_RE_REF NUMBER(5),	
	FILE_RE_LEV NUMBER(5),	
	FILE_RE_SEQ NUMBER(5),
	FILE_READCOUNT NUMBER(5),
	FILE_ORIGINAL VARCHAR2(100),	
	FILE_ORIGINAL2 VARCHAR2(100),	
	FILE_DATE DATE ,
	DEPT VARCHAR2(30) check (dept in ('홍보팀', '개발팀', '인사팀', '기획팀', '영업팀')),
	FIlE_EMPNO varchar2(50)
	)
	
	
	  SELECT * FROM (select rownum rnum, j.* from (
							 select file_board.*, nvl(CNT ,0) CNT 
							from board3 left outer join (select board_num,count(*) CNT  
														from comments3 
														group by board_num)b 
												on board3.board_num = b.board_num  
							order by board_re_ref desc,  
							board_re_seq asc)j
							 				where rownum&lt;=  #{end}   ) 
							WHERE rnum&gt;= #{start}  and rnum&lt;= #{end}  
							
							
							
		SELECT * FROM (select rownum rnum, j.* from ( 
											 select file_board.*, nvl(CNT ,0) CNT 
											from file_board left outer join (select F_C_NUM,count(*) CNT  
																		from Filecomm 
																		group by F_C_NUM)b 
														on file_board.FILE_NUM = b.F_BO_NUM 
														order by FILE_RE_REF desc, 
														FILE_RE_SEQ asc)j 
						where rownum<=10 ) 
	WHERE rnum>=0 and rnum<=10;
	
